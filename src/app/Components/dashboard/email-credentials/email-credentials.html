<div class="email-credentials-page">
  <div class="page-header">
    <h2>Email Credentials</h2>
    <button class="btn btn-primary" (click)="openAddForm()">+ Add Credentials</button>
  </div>

  <div class="info-card card">
    <h3>Email Configuration</h3>
    <p>Configure email credentials for sending automated emails and notifications from your application.</p>
  </div>

  @if (showForm()) {
    <div class="modal-overlay" (click)="closeForm()">
      <div class="modal-content card" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>{{ editingCredential() ? 'Edit Email Credentials' : 'Add Email Credentials' }}</h3>
          <button class="close-btn" (click)="closeForm()">Ã—</button>
        </div>
        <form [formGroup]="credentialForm" (ngSubmit)="onSubmit()" class="credential-form">
          <div class="form-group">
            <label>Email Address *</label>
            <input type="email" formControlName="email" [class.error]="credentialForm.get('email')?.invalid && credentialForm.get('email')?.touched" />
            @if (credentialForm.get('email')?.invalid && credentialForm.get('email')?.touched) {
              <span class="error-text">Please enter a valid email address</span>
            }
          </div>
          <div class="form-group">
            <label>Password *</label>
            <input type="password" formControlName="password" [class.error]="credentialForm.get('password')?.invalid && credentialForm.get('password')?.touched" />
            @if (credentialForm.get('password')?.invalid && credentialForm.get('password')?.touched) {
              <span class="error-text">Password is required</span>
            }
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>SMTP Server</label>
              <input type="text" formControlName="smtpServer" placeholder="smtp.gmail.com" />
            </div>
            <div class="form-group">
              <label>SMTP Port</label>
              <input type="number" formControlName="smtpPort" min="1" max="65535" />
            </div>
          </div>
          <div class="form-actions">
            <button type="button" class="btn btn-outline" (click)="closeForm()">Cancel</button>
            <button type="submit" class="btn btn-primary" [disabled]="credentialForm.invalid">Save</button>
          </div>
        </form>
      </div>
    </div>
  }
</div>